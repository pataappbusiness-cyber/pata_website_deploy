"use strict";function setInitialStates(){document.querySelectorAll("section, .how-it-works, .comparison-section").forEach(t=>{t.style.backgroundColor||(t.style.backgroundColor="var(--color-primary-900)")})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",setInitialStates):setInitialStates();const BrowserSupport={hasIntersectionObserver:"IntersectionObserver"in window,hasRequestAnimationFrame:"requestAnimationFrame"in window,hasBackdropFilter:!("undefined"==typeof CSS||!CSS.supports)&&(CSS.supports("backdrop-filter","blur(10px)")||CSS.supports("-webkit-backdrop-filter","blur(10px)")),hasSmoothScroll:"scrollBehavior"in document.documentElement.style,isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isSafari:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};function createIntersectionObserver(t,e){return BrowserSupport.hasIntersectionObserver?new IntersectionObserver(t,e):(console.warn("IntersectionObserver not supported, using fallback"),null)}function observeElements(t,e,o="animate-in"){t&&BrowserSupport.hasIntersectionObserver?e.forEach(e=>t.observe(e)):e.forEach(t=>t.classList.add(o))}function formatDate(t){return new Date(t).toLocaleDateString("pt-PT",{year:"numeric",month:"long",day:"numeric"})}document.addEventListener("DOMContentLoaded",function(){let t;!function(){if("undefined"==typeof Lenis)return void devLog("Lenis library not loaded, using native scroll");t=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,smoothTouch:!1,touchMultiplier:2,infinite:!1}),requestAnimationFrame(function e(o){t.raf(o),requestAnimationFrame(e)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const o=this.getAttribute("href");if("#"===o)return;const i=document.querySelector(o);if(i){e.preventDefault();const o=document.querySelector(".navbar"),n=o?o.offsetHeight:0,s=i.offsetTop-n;t.scrollTo(s,{duration:1.5})}})}),devLog("Lenis smooth scroll initialized")}();const e=document.getElementById("navbarToggle"),o=document.querySelector(".navbar-links");if(e&&o){e.addEventListener("click",function(){const t="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!t),this.classList.toggle("active"),o.classList.toggle("active")});o.querySelectorAll("a").forEach(t=>{t.addEventListener("click",function(){e.setAttribute("aria-expanded","false"),e.classList.remove("active"),o.classList.remove("active")})}),document.addEventListener("click",function(t){!(e.contains(t.target)||o.contains(t.target))&&o.classList.contains("active")&&(e.setAttribute("aria-expanded","false"),e.classList.remove("active"),o.classList.remove("active"))})}const i=document.querySelector(".navbar");document.querySelectorAll(".navbar-cta-button").forEach(n=>{n.addEventListener("click",function(n){n.preventDefault(),e&&o&&(e.classList.remove("active"),o.classList.remove("active"));const s=document.getElementById("waitlist");if(s){const e=i?i.offsetHeight:0,o=s.offsetTop-e;t?t.scrollTo(o,{duration:1.5}):window.scrollTo({top:o,behavior:"smooth"})}})}),function(){const t=document.querySelectorAll(".hero-image");if(0===t.length)return;let e=0;setInterval(function(){t[e].classList.remove("active"),setTimeout(()=>{e=(e+1)%t.length,t[e].classList.add("active")},500)},5e3)}();class n{constructor(t,e,o=0){this.container=t,this.logoId=e,this.delay=o,this.element=null,this.position=s.getValidPosition(),this.rotation=60*Math.random()-30,this.scale=.4*Math.random()+.75,this.isVisible=!1,this.interval=null,this.init()}init(){this.element=document.createElement("div"),this.element.className="separator-logo";const t=document.createElement("img");t.src="src/img/icons/pata_separador_x9ufnu.svg",t.alt="PATA logo",this.element.appendChild(t),this.container.appendChild(this.element),s.updatePosition(this.logoId,this.position),setTimeout(()=>{this.show(),this.startAnimation()},this.delay)}updateTransform(){this.element.style.left=`${this.position}%`,this.element.style.transform=`translate(-50%, -50%) rotate(${this.rotation}deg) scale(${this.scale})`}show(){this.isVisible=!0,this.element.classList.add("visible"),this.updateTransform()}hide(){this.isVisible=!1,this.element.classList.remove("visible")}startAnimation(){this.interval=setInterval(()=>{this.hide(),setTimeout(()=>{this.position=s.getValidPosition(),s.updatePosition(this.logoId,this.position),this.rotation=60*Math.random()-30,this.scale=.4*Math.random()+.75,this.show()},800)},5e3)}destroy(){this.interval&&clearInterval(this.interval),s.removePosition(this.logoId),this.element&&this.element.remove()}}const s=new class{constructor(){this.positions=[],this.minDistance=12}isPositionValid(t){return this.positions.every(e=>Math.abs(e.x-t)>=this.minDistance)}getValidPosition(t=30){for(let e=0;e<t;e++){const t=75*Math.random()+10;if(this.isPositionValid(t))return t}return 75*Math.random()+10}updatePosition(t,e){this.positions=this.positions.filter(e=>e.id!==t),this.positions.push({x:e,id:t})}removePosition(t){this.positions=this.positions.filter(e=>e.id!==t)}};window.positionManager=s,[document.getElementById("separatorLogos"),document.getElementById("separatorLogos2")].forEach((t,e)=>{if(!t)return;const o=[];for(let i=0;i<2;i++){const s=new n(t,100*e+i,2500*i);o.push(s)}});document.querySelectorAll("section").forEach(t=>{gsap.from(t,{y:30,duration:.8,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 90%",toggleActions:"play none none none",once:!0}})});const a=createIntersectionObserver(function(t){t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("animate-in"),a&&a.unobserve(t.target))})},{threshold:.2,rootMargin:"0px 0px -50px 0px"}),r=document.querySelectorAll(".testimonial-card");observeElements(a,r,"animate-in");const l=createIntersectionObserver(function(t){t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("visible"),l&&l.unobserve(t.target))})},{threshold:.2,rootMargin:"0px 0px -50px 0px"}),c=document.querySelectorAll(".problem2-card");function d(){if(window.innerWidth<768)return;const t=document.querySelectorAll(".problem3-icon-wrapper");t.forEach(t=>{t.addEventListener("mousemove",function(t){const{clientX:e,clientY:o,currentTarget:i}=t,{clientWidth:n,clientHeight:s}=i,a=i.getBoundingClientRect(),r=a.left,l=(o-a.top)/s,c=(7.5-15*((e-r)/n)).toFixed(2),d=(15*l-7.5).toFixed(2);i.style.transform=`perspective(${n}px) rotateX(${d}deg) rotateY(${c}deg) scale3d(1.1, 1.1, 1.1)`,i.style.transition="transform 0.1s ease-out, box-shadow 0.3s ease-out"}),t.addEventListener("mouseleave",function(){this.style.transform=`perspective(${this.clientWidth}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`,this.style.transition="all 0.3s ease-out"})})}function u(){if(window.innerWidth>=768)return;const t=document.getElementById("problem3CarouselTrack");if(!t)return;const e=[{title:"Acesso difícil.",icon:"acesso_dificil_2_ongsms.svg"},{title:"Custos elevados.",icon:"custos_elevados_2_zk85dx.svg"},{title:"Incerteza<br>constante.",icon:"incerteza_constante_2_pnjjjl.svg"},{title:"Stress<br>desnecessário.",icon:"stress_desnecessario_3_yud6yk.svg"}];[...e,...e,...e].forEach((e,o)=>{const i=document.createElement("div");i.className="problem3-card",i.innerHTML=`\n                <div class="problem3-icon-wrapper">\n                    <img src="src/img/icons/${e.icon}" alt="${e.title}" class="problem3-icon">\n                </div>\n                <h4 class="problem3-card-text">${e.title}</h4>\n            `,t.appendChild(i)});let o=0;const i=164*e.length;!function e(){o+=.5;const n=o%i;t.style.transform=`translateX(-${n}px)`,requestAnimationFrame(e)}()}let m;function p(){if(window.innerWidth<768)return;const t=document.querySelectorAll(".joinus-benefit-icon");t.forEach(t=>{let e="";t.addEventListener("mousemove",function(t){const{clientX:o,clientY:i,currentTarget:n}=t,{clientWidth:s}=n,a=n.getBoundingClientRect(),r=(o-a.left)/s,l=(i-a.top)/n.clientHeight,c=(7.5-15*r).toFixed(2),d=(15*l-7.5).toFixed(2);e=`perspective(${s}px) rotateX(${d}deg) rotateY(${c}deg) scale3d(1.05, 1.05, 1.05)`,n.style.transform=e,n.style.transition="transform 0.1s ease-out"}),t.addEventListener("mouseleave",function(){this.style.transform=`perspective(${this.clientWidth}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`,this.style.transition="all 0.3s ease-out"}),t.addEventListener("touchstart",function(t){t.preventDefault(),this.style.transform="scale(0.95)"}),t.addEventListener("touchend",function(){this.style.transform="scale(1)"})})}function f(){if(window.innerWidth>=768)return;const t=document.getElementById("joinusCarouselTrack");if(!t)return;const e=[{text:"3 meses de subscrição ao preço de 1",icon:"meses de subscricao.svg"},{text:"Preços fundadores vitalícios (nunca aumentam)",icon:"precos_fundadores.svg"},{text:"Acesso prioritário permanente a novas funcionalidades",icon:"acesso_prioritario.svg"},{text:"Voz ativa no desenvolvimento do produto",icon:"voz_ativa.svg"},{text:"Badge exclusivo de membro fundador",icon:"membership.svg"}];[...e,...e,...e].forEach((e,o)=>{const i=document.createElement("div");i.className="joinus-benefit-item",i.style.flexShrink="0",i.innerHTML=`\n                <div class="joinus-benefit-icon">\n                    <img src="src/img/icons/${e.icon}" alt="${e.text}">\n                </div>\n                <p class="joinus-benefit-text">${e.text}</p>\n            `,t.appendChild(i)});let o=0;const i=164*e.length;!function e(){o+=.3;const n=o%i;t.style.transform=`translateX(-${n}px)`,requestAnimationFrame(e)}()}observeElements(l,c,"visible"),d(),u(),window.addEventListener("resize",function(){clearTimeout(m),m=setTimeout(function(){d(),u(),p(),f()},250)}),document.getElementById("comparisonTable")&&("undefined"!=typeof jQuery&&void 0!==jQuery.fn.DataTable?(jQuery("#comparisonTable").DataTable({paging:!1,searching:!1,info:!1,ordering:!1,responsive:!0,autoWidth:!1,language:{emptyTable:"Sem dados disponíveis"}}),devLog("Comparison table initialized with DataTables")):devLog("DataTables not available, using plain table")),function(){const t=document.querySelector(".comparison-section");if(!t)return;const e=createIntersectionObserver(function(t){t.forEach(t=>{t.isIntersecting?(t.target.classList.add("fade-in"),t.target.classList.remove("fade-out")):(t.target.classList.add("fade-out"),t.target.classList.remove("fade-in"))})},{threshold:[0,.1,.2],rootMargin:"0px 0px -100px 0px"});e&&BrowserSupport.hasIntersectionObserver?e.observe(t):t.classList.add("fade-in"),devLog("Comparison section animations initialized")}(),p(),f()});const isDevelopment="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;function devLog(...t){isDevelopment&&console.log("[PATA]",...t)}devLog("Main functions loaded successfully"),function(){const t=document.querySelector(".custom-cursor");if(!t)return;const e=window.matchMedia("(pointer: fine)").matches,o=window.matchMedia("(hover: hover)").matches;if(!e||!o)return void(t.style.display="none");document.body.classList.add("has-custom-cursor");let i=0,n=0,s=0,a=0,r=!1;document.addEventListener("mouseenter",function(){r||(t.style.opacity="1",r=!0)}),document.addEventListener("mouseleave",function(){t.style.opacity="0",r=!1}),document.addEventListener("mousemove",function(e){i=e.clientX,n=e.clientY,r||(t.style.opacity="1",r=!0);const o=e.target,s=o.closest(".draggable-element"),a="IMG"===o.tagName;s||a?t.classList.add("hovering"):t.classList.remove("hovering")}),function e(){s+=.15*(i-s),a+=.15*(n-a),t.style.left=s+"px",t.style.top=a+"px",requestAnimationFrame(e)}(),document.addEventListener("mousedown",function(){t.classList.add("clicking")}),document.addEventListener("mouseup",function(){t.classList.remove("clicking")});let l=!1;document.addEventListener("touchstart",function(){l||(l=!0,document.body.classList.remove("has-custom-cursor"),t.style.display="none")},{once:!0,passive:!0})}(),function(){const t=document.getElementById("draggableElement");if(!t)return;let e=!1,o=0,i=0,n=0,s=0,a=0,r=0;t.getBoundingClientRect();function l(o){o.preventDefault(),"touchstart"===o.type?(n=o.touches[0].clientX-a,s=o.touches[0].clientY-r):(n=o.clientX-a,s=o.clientY-r),(o.target===t||t.contains(o.target))&&(e=!0)}function c(l){var c,d;e&&(l.preventDefault(),"touchmove"===l.type?(o=l.touches[0].clientX-n,i=l.touches[0].clientY-s):(o=l.clientX-n,i=l.clientY-s),a=o,r=i,c=o,d=i,t.style.transform=`translate(${c}px, ${d}px)`)}function d(t){n=o,s=i,e=!1}a=0,r=0,t.addEventListener("mousedown",l),document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),t.addEventListener("touchstart",l),document.addEventListener("touchmove",c),document.addEventListener("touchend",d),devLog("Draggable element initialized")}();const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function animateTitles(){if(prefersReducedMotion)return;[".hero-title",".problem1-title",".problem2-title",".problem3-subtitle",".solution-title",".comparison-header h2",".joinus-title",".platform-title",".deserve-title"].forEach(t=>{document.querySelectorAll(t).forEach(t=>{if(t.classList.contains("gsap-split-processed"))return;const e=t.innerHTML.split(/<br\s*\/?>/i).map(t=>t.split(/\s+/).filter(t=>t.length>0).map(t=>`<span class="gsap-word" style="display: inline-block; opacity: 0; transform: translateY(50px); will-change: transform, opacity;">${t}</span>`).join(" "));t.innerHTML=e.join("<br>"),t.classList.add("gsap-split-processed");const o=t.querySelectorAll(".gsap-word");"undefined"!=typeof gsap&&gsap.from(o,{duration:.8,opacity:0,y:50,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 80%",toggleActions:"play none none none",once:!0}})})}),devLog("Title animations initialized")}function animateCards(){if(prefersReducedMotion)return;let t=[];[".testimonial-card",".problem2-card",".problem3-card",".solution-card",".joinus-benefit-item",".deserve-badge-item",".hero-stat",".hero-image-container",".hero-content"].forEach(e=>{const o=document.querySelectorAll(e);t=[...t,...Array.from(o)]}),t.forEach((t,e)=>{if(t.classList.contains("gsap-card-processed"))return;const o="Left"===(Math.random()>.5?"Left":"Right")?-80:80;t.style.willChange="transform, opacity",t.classList.add("gsap-card-processed"),"undefined"!=typeof gsap&&gsap.from(t,{opacity:0,x:o,duration:.6,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 85%",end:"bottom 15%",toggleActions:"play reverse play reverse",onEnter:()=>{t.style.willChange="transform, opacity"},onLeave:()=>{setTimeout(()=>{t.style.willChange="auto"},600)},onEnterBack:()=>{t.style.willChange="transform, opacity"},onLeaveBack:()=>{setTimeout(()=>{t.style.willChange="auto"},600)}}})}),devLog(`Card animations initialized for ${t.length} elements`)}function animateSpecialSections(){if(prefersReducedMotion)return;const t=document.querySelector(".comparison-table-wrapper");t&&"undefined"!=typeof gsap&&gsap.from(t,{opacity:0,y:30,duration:.8,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 80%",toggleActions:"play reverse play reverse"}});const e=document.querySelector(".platform-animation");e&&"undefined"!=typeof gsap&&gsap.from(e,{opacity:0,scale:.9,duration:.8,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play reverse play reverse"}});const o=document.querySelector(".waitlist-form");if(o&&"undefined"!=typeof gsap){const t=o.querySelectorAll(".form-group"),e=o.querySelector(".form-submit");gsap.from(t,{opacity:0,y:30,duration:.6,stagger:.1,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 80%",toggleActions:"play none none none",once:!0}}),e&&gsap.from(e,{opacity:0,y:20,duration:.6,delay:.1*t.length,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 80%",toggleActions:"play none none none",once:!0}})}devLog("Special section animations initialized")}function initNavbarScrollEffect(){document.querySelector(".navbar")&&"undefined"!=typeof gsap&&ScrollTrigger.create({start:"top -80",end:99999,toggleClass:{className:"navbar-scrolled",targets:".navbar"}})}prefersReducedMotion||"undefined"!=typeof gsap&&"undefined"!=typeof ScrollTrigger&&(gsap.registerPlugin(ScrollTrigger),devLog("GSAP and ScrollTrigger loaded successfully"));const WAITLIST_CONFIG={GOOGLE_SCRIPT_URL:"https://script.google.com/macros/s/AKfycbwLjXT0tVa9jKMfdq5M12VYxsXpWfCne7uWHktjc6QO3PdUxu5GhXNUX1W5nu41CNA/exec",MAX_SPOTS:500,DEBUG_MODE:!1};async function loadWaitlistRemainingSpots(){if(WAITLIST_CONFIG.GOOGLE_SCRIPT_URL&&!WAITLIST_CONFIG.GOOGLE_SCRIPT_URL.includes("https://script.google.com/macros/s/AKfycbzGaHMic8POjlWPj6CXjSCNkgmNVrrH0_rLEjufkBUbKa6pB9ZDA-wbIdCNoTVgDlU/exec"))try{const t=`${WAITLIST_CONFIG.GOOGLE_SCRIPT_URL}?action=getCount&callback=handleWaitlistCountResponse`,e=document.createElement("script");e.src=t;const o=setTimeout(()=>{updateWaitlistSpotCounter(WAITLIST_CONFIG.MAX_SPOTS)},5e3);window.handleWaitlistCountResponse=function(t){if(clearTimeout(o),t.success){const e=WAITLIST_CONFIG.MAX_SPOTS-t.count;updateWaitlistSpotCounter(e),e<=0&&!WAITLIST_CONFIG.DEBUG_MODE&&showWaitlistListaCheia()}else updateWaitlistSpotCounter(WAITLIST_CONFIG.MAX_SPOTS)},document.head.appendChild(e)}catch(t){updateWaitlistSpotCounter(WAITLIST_CONFIG.MAX_SPOTS)}else updateWaitlistSpotCounter(WAITLIST_CONFIG.MAX_SPOTS)}function updateWaitlistSpotCounter(t){const e=document.getElementById("remainingSpots");e&&(e.textContent=t)}function showWaitlistListaCheia(){document.getElementById("waitlistMainContent").style.display="none",document.getElementById("waitlistListaCheia").style.display="flex"}function setupWaitlistFormValidation(){const t=document.getElementById("waitlistForm");if(!t)return;t.querySelectorAll("input[required], select[required]").forEach(t=>{t.addEventListener("blur",function(){validateWaitlistField(this)}),t.addEventListener("input",function(){this.classList.contains("error")&&clearWaitlistFieldError(this)})})}function validateWaitlistField(t){const e=t.id,o=t.value.trim();let i=!0,n="";switch(e){case"waitlistNome":o||(i=!1,n="Tem de inserir o nome.");break;case"waitlistEmail":o&&isValidWaitlistEmail(o)||(i=!1,n="Email inválido.");break;case"waitlistDistrito":o||(i=!1,n="Selecione um distrito.");break;case"waitlistAnimal":o||(i=!1,n="Selecione uma opção.")}return i?clearWaitlistFieldError(t):showWaitlistFieldError(t,n),i}function validateWaitlistForm(){const t=document.getElementById("waitlistForm").querySelectorAll("input[required], select[required]");let e=!0;return t.forEach(t=>{validateWaitlistField(t)||(e=!1)}),validateCaptcha()||(e=!1),e}function showWaitlistFieldError(t,e){t.classList.add("error"),t.setAttribute("aria-invalid","true");const o=document.getElementById(`${t.id}Error`);o&&(o.textContent=e,o.classList.add("show"))}function clearWaitlistFieldError(t){t.classList.remove("error"),t.setAttribute("aria-invalid","false");const e=document.getElementById(`${t.id}Error`);e&&e.classList.remove("show")}function isValidWaitlistEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function setupWaitlistFormSubmission(){const t=document.getElementById("waitlistForm");t&&t.addEventListener("submit",handleWaitlistFormSubmit)}async function handleWaitlistFormSubmit(t){if(t.preventDefault(),!WAITLIST_CONFIG.GOOGLE_SCRIPT_URL||WAITLIST_CONFIG.GOOGLE_SCRIPT_URL.includes("https://script.google.com/macros/s/AKfycbzGaHMic8POjlWPj6CXjSCNkgmNVrrH0_rLEjufkBUbKa6pB9ZDA-wbIdCNoTVgDlU/exec"))return void alert("⚠️ Erro de configuração: URL do Google Script não está configurado.");if(!validateWaitlistForm())return;const e={nome:document.getElementById("waitlistNome").value.trim(),email:document.getElementById("waitlistEmail").value.trim(),distrito:document.getElementById("waitlistDistrito").value,animal:document.getElementById("waitlistAnimal").value,captcha:document.getElementById("waitlistCaptcha").value.trim(),timestamp:(new Date).toISOString()},o=document.getElementById("waitlistSubmitBtn");o.disabled=!0,o.classList.add("loading");try{await submitWaitlistViaIframe(e),showWaitlistSuccessModal(),resetWaitlistForm(),setTimeout(()=>{loadWaitlistRemainingSpots()},1e3)}catch(t){alert("Ocorreu um erro ao enviar o formulário. Por favor, tente novamente.")}finally{o.disabled=!1,o.classList.remove("loading")}}function submitWaitlistViaIframe(t){return new Promise((e,o)=>{const i=document.createElement("iframe");i.style.display="none",i.name="pata-waitlist-submit-frame",document.body.appendChild(i);const n=document.createElement("form");n.target="pata-waitlist-submit-frame",n.method="POST",n.action=WAITLIST_CONFIG.GOOGLE_SCRIPT_URL,Object.keys(t).forEach(e=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t[e],n.appendChild(o)}),document.body.appendChild(n),n.submit(),setTimeout(()=>{document.body.removeChild(n),document.body.removeChild(i),e()},2e3)})}function resetWaitlistForm(){const t=document.getElementById("waitlistForm");t.reset();const e=document.getElementById("waitlistDistrito"),o=document.getElementById("waitlistAnimal");e&&(e.selectedIndex=0,e.dispatchEvent(new Event("change",{bubbles:!0}))),o&&(o.selectedIndex=0,o.dispatchEvent(new Event("change",{bubbles:!0})));t.querySelectorAll("input, select").forEach(t=>clearWaitlistFieldError(t)),generateCaptcha()}function showWaitlistSuccessModal(){const t=document.getElementById("waitlistSuccessModal");t.classList.add("show"),t.setAttribute("aria-hidden","false"),t.previouslyFocused=document.activeElement;const e=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0&&e[0].focus(),trapFocusInModal(t),setTimeout(()=>{closeWaitlistModal()},5e3)}function closeWaitlistModal(){const t=document.getElementById("waitlistSuccessModal");t.classList.remove("show"),t.setAttribute("aria-hidden","true"),removeFocusTrap(t),t.previouslyFocused&&t.previouslyFocused.focus&&t.previouslyFocused.focus()}function trapFocusInModal(t){const e=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=e[0],i=e[e.length-1];t.focusTrapHandler=function(t){"Tab"===t.key&&(t.shiftKey&&document.activeElement===o?(i.focus(),t.preventDefault()):t.shiftKey||document.activeElement!==i||(o.focus(),t.preventDefault())),"Escape"===t.key&&closeWaitlistModal()},t.addEventListener("keydown",t.focusTrapHandler)}function removeFocusTrap(t){t.focusTrapHandler&&(t.removeEventListener("keydown",t.focusTrapHandler),t.focusTrapHandler=null)}document.addEventListener("DOMContentLoaded",function(){loadWaitlistRemainingSpots(),setupWaitlistFormValidation(),setupWaitlistFormSubmission()}),window.addEventListener("click",function(t){const e=document.getElementById("waitlistSuccessModal");t.target===e&&closeWaitlistModal()});const CAPTCHA_QUESTIONS=[{question:"Quanto é 3 + 5?",answer:"8"},{question:"Quanto é 10 - 4?",answer:"6"},{question:"Quanto é 2 × 3?",answer:"6"},{question:"Quanto é 15 ÷ 3?",answer:"5"},{question:"Quanto é 7 + 2?",answer:"9"},{question:"Quanto é 12 - 5?",answer:"7"},{question:"Quanto é 4 × 2?",answer:"8"},{question:"Quanto é 20 ÷ 4?",answer:"5"}];let currentCaptcha=null;function generateCaptcha(){const t=Math.floor(Math.random()*CAPTCHA_QUESTIONS.length);currentCaptcha=CAPTCHA_QUESTIONS[t];const e=document.getElementById("captchaQuestion");e&&(e.textContent=currentCaptcha.question);const o=document.getElementById("waitlistCaptcha");o&&(o.value="",clearWaitlistFieldError(o))}function validateCaptcha(){const t=document.getElementById("waitlistCaptcha"),e=t.value.trim();return e?e!==currentCaptcha.answer?(showWaitlistFieldError(t,"Resposta incorreta. Tente novamente."),generateCaptcha(),!1):(clearWaitlistFieldError(t),!0):(showWaitlistFieldError(t,"Por favor, responda à pergunta."),!1)}function initLottieLazyLoad(){const t=document.querySelectorAll("dotlottie-wc");if(0===t.length)return void devLog("No Lottie animations found");const e=createIntersectionObserver(function(t){t.forEach(t=>{if(t.isIntersecting){const o=t.target,i=o.getAttribute("data-src");i&&(o.setAttribute("src",i),o.hasAttribute("data-autoplay")&&o.setAttribute("autoplay","true"),o.hasAttribute("data-loop")&&o.setAttribute("loop","true"),devLog("Lottie animation loaded:",i)),e.unobserve(o)}})},{rootMargin:"50px",threshold:.01});e&&BrowserSupport.hasIntersectionObserver?(t.forEach(t=>e.observe(t)),devLog(`Lottie lazy load initialized for ${t.length} animations`)):(t.forEach(t=>{const e=t.getAttribute("data-src");e&&(t.setAttribute("src",e),t.hasAttribute("data-autoplay")&&t.setAttribute("autoplay","true"),t.hasAttribute("data-loop")&&t.setAttribute("loop","true"))}),devLog("Lottie lazy load fallback: all animations loaded immediately"))}document.addEventListener("DOMContentLoaded",function(){generateCaptcha();const t=document.getElementById("waitlistCaptcha");t&&(t.addEventListener("blur",function(){this.value.trim()&&validateCaptcha()}),t.addEventListener("input",function(){this.classList.contains("error")&&clearWaitlistFieldError(this)}))}),document.addEventListener("DOMContentLoaded",function(){initLottieLazyLoad()});document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);const headers=document.querySelectorAll("h1, h2");Splitting({target:headers,by:"words"}),setTimeout(()=>{headers.forEach(t=>{const e=t.querySelectorAll(".word");gsap.set(e,{opacity:0,y:10,clearProps:"all"}),gsap.set(e,{opacity:0,y:10}),gsap.to(e,{opacity:1,y:0,duration:.4,stagger:.08,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 90%",toggleActions:"play none none none",once:!0,refreshPriority:-1}})})},100)});window.addEventListener("load",()=>{const headers=document.querySelectorAll("h1, h2");headers.forEach(t=>{const e=t.querySelectorAll(".word");e.length>0&&gsap.set(e,{opacity:0,y:10})});setTimeout(()=>{ScrollTrigger.refresh()},150)});